#!/bin/sh
TMP_FILE=/tmp/preout

class=""
while [ -z "${1%%-*}" ]; do
    case "$1" in
        -c) class="$class${class:+ }$2" ; shift 2 ;;
        --) shift ; break ;;
        *) echo "Invalid option '$1' for $0" >&2
           exit 64
           ;;
    esac
done

"$@" > $TMP_FILE
RES=$?
[ -s $TMP_FILE ] && _prewrap "$class" < $TMP_FILE
rm $TMP_FILE ||Â true
exit $RES
